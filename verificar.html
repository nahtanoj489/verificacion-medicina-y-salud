<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Verificación de Certificado Médico</title>

<script src="api.js"></script>

<style>
body{
font-family:Arial;
background:#f4f6f8;
padding:30px;
}

.card{
background:white;
padding:20px;
border-radius:8px;
max-width:500px;
margin:auto;
}

.valid{color:green;font-weight:bold}
.invalid{color:red;font-weight:bold}

</style>

</head>
<body>

<div class="card">

<h2>Verificación de certificado</h2>

<div id="resultado">Verificando...</div>

</div>

<script>

const params = new URLSearchParams(window.location.search);

const code = params.get("code");

if(!code){

document.getElementById("resultado").innerHTML =
"<span class='invalid'>Código no especificado</span>";

}else{

verificarCertificado(code)
.then(data=>{

if(data.length>0){

const cert = data[0];

document.getElementById("resultado").innerHTML = `

<div class='valid'>CERTIFICADO VÁLIDO</div>

<br>

Paciente: ${cert.patient_name}<br>
Documento: ${cert.patient_id}<br>
Fecha inicio: ${cert.start}<br>
Días: ${cert.days}<br>

<br>

Código: ${cert.code}

`;

}else{

document.getElementById("resultado").innerHTML =
"<span class='invalid'>CERTIFICADO NO VÁLIDO</span>";

}

});

}

</script>

</body>
</html>
